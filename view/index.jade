extends layout

block body
  header.header
    h1.header__title Babel Library
    if !authenticated
      a.header__account(href="/login") Login
    else
      .header__right
        a.header__add#addItem +
        a.header__account(href="/logout") Logout

  main
    each book, i in books
      - book = book.attributes
      .book.js-book(data-isbn="#{book.isbn}" data-title="#{book.title}" data-author="#{book.author}" data-image="#{book.image}")
        img(src="#{book.image}" alt="")

  if authenticated
    .modal.js-modal
    form.modal__form.js-modal__form(action="/book" method="POST")
      input(type="hidden" name="_csrf" value="#{csrf}")
      input(type="text" name="isbn" placeholder="ISBN")
      input(type="submit" value="Add")

  if authenticated
    script(type="text/template" id="bookDetail-template")
      section.bookDetail.js-bookDetail(data-isbn!="<%= isbn %>")
        header.bookDetail__header
          h2.bookDetail__title <%= title %>
          i.fa.fa-times.bookDetail__close.js-bookDetail__close
        .bookDetail__body
          img.bookDetail__img(src!="<%= image %>")
          i.fa.fa-trash.bookDetail__remove.js-bookDetail__remove

    script(src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js")
    script(src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/3.10.1/lodash.min.js")
    script(src="script/app.js")
